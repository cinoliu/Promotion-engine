webpackJsonp([11],{205:function(t,e,a){"use strict";function i(t){l||a(282)}Object.defineProperty(e,"__esModule",{value:!0});var n=a(243),s=a.n(n);for(var o in n)"default"!==o&&function(t){a.d(e,t,function(){return n[t]})}(o);var r=a(284),l=!1,d=a(2),u=i,c=d(s.a,r.a,!1,u,"data-v-c897523c",null);c.options.__file="src/views/systemManagement/system_authResManager.vue",e.default=c.exports},213:function(t,e,a){"use strict";e.__esModule=!0;var i=a(214),n=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=function(t,e,a){return e in t?(0,n.default)(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}},214:function(t,e,a){t.exports={default:a(215),__esModule:!0}},215:function(t,e,a){a(216);var i=a(3).Object;t.exports=function(t,e,a){return i.defineProperty(t,e,a)}},216:function(t,e,a){var i=a(20);i(i.S+i.F*!a(7),"Object",{defineProperty:a(5).f})},243:function(t,e,a){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n=a(45),s=i(n),o=a(213),r=i(o);e.default={name:"list",components:{},data:function(){var t,e=this;return t={currIndex:0,searchState:!1,showHeader:!0,loading2:!1,fixedHeader:!1,tableSize:"small",DateReady:!1,loading:!1},(0,r.default)(t,"currIndex",0),(0,r.default)(t,"saveDisabled",!1),(0,r.default)(t,"current",1),(0,r.default)(t,"totalSize",0),(0,r.default)(t,"start",0),(0,r.default)(t,"limit",10),(0,r.default)(t,"auth_name",""),(0,r.default)(t,"type_selected","ALL"),(0,r.default)(t,"parent_res",[]),(0,r.default)(t,"parent_selected",-1),(0,r.default)(t,"add_info",{}),(0,r.default)(t,"addModal",!1),(0,r.default)(t,"parent_option",[]),(0,r.default)(t,"formValidate",{name:[{required:!0,message:"请填写资源名称",trigger:"blur"}],auth_type:[{required:!0,message:"请选择资源类型",trigger:"change"}],res_key:[{required:!0,message:"请填写资源标识,并以 ROLE_ 为前缀",trigger:"blur"}],link_url:[{required:!0,message:"请填写资源URL",trigger:"blur"}],icon:[{required:!0,message:"请填写资源图标",trigger:"blur"}],isLeaf:[{required:!0,message:"请选择是否子节点",trigger:"change"}],sort:[{required:!0,message:"请填写资源排序",trigger:"blur"}]}),(0,r.default)(t,"edit_info",{}),(0,r.default)(t,"editModal",!1),(0,r.default)(t,"listData",[]),(0,r.default)(t,"columns1",[{title:"资源名称",key:"name",align:"center",fixed:"left",width:150},{title:"资源类型",key:"auth_type",width:150,render:function(t,e){var a=e.row;return t("Tag",{props:{color:"MODULE"===a.auth_type?"blue":"MENU"===a.auth_type?"red":"green"}},"MODULE"===a.auth_type?"模块":"MENU"===a.auth_type?"菜单":"操作")}},{title:"资源标识",key:"res_key",align:"center",width:150},{title:"URL",key:"link_url",align:"center",width:150},{title:"小图标",key:"icon",align:"center",width:150},{title:"子节点",key:"isLeaf",width:150,render:function(t,e){var a=e.row;return t("Tag",{props:{color:1===a.isLeaf?"blue":"red"}},1===a.isLeaf?"是":"否")}},{title:"排序",key:"sort",align:"center",width:150},{title:"最后更新时间",key:"modify_time",align:"center",width:150},{title:"修改人",key:"editor",align:"center",width:150},{title:"操作",key:"action",width:250,fixed:"right",align:"center",render:function(t,a){return t("div",[t("Button",{props:{type:"text",size:"small"},style:{color:"#5cadff"},on:{click:function(){e.editOpen(a.index)}}},"编辑"),t("Button",{props:{type:"text",size:"small"},style:{color:"#ff3300"},on:{click:function(){e.remove(a)}}},"删除")])}}]),t},watch:{params:{handler:function(t){this.updateTableList(t)},deep:!0},fixedHeader:{handler:function(t){t&&this.$Message.info("表头已固定")}}},computed:{state:function(){return this.$store.state.app}},methods:{searchShow:function(){this.searchState=!this.searchState},refresh:function(){this.updateTableList(this.params)},queryTableList:function(){this.updateTableList(this.params)},changePageSize:function(t){this.limit=t,this.updateTableList()},changeCurrent:function(t){this.start=t*this.limit-this.limit,this.updateTableList()},updateTableList:function(t){var e=this;this.loading2=!0,this.load=!0;var a={name:this.auth_name,auth_type:this.type_selected,parent_id:this.parent_selected,start:this.start,limit:this.limit};this.func.ajaxPost(this.api.getAuthResList,this.qs.stringify(a),function(t){200==t.status?(e.totalSize=t.data.totalSize,e.listData=t.data.resultList,e.DateReady=!0,e.loading2=!1):(e.$Message.error(t.msg),e.loading2=!1)})},getAuthResTypeList:function(){var t=this,e={authType:"noOpt"};this.func.ajaxPost(this.api.getAuthResTypeInfo,this.qs.stringify(e),function(e){t.parent_res=e.data.root})},onSelect:function(t,e){},onSelectionChange:function(t){this.params.limit=t},remove:function(t){var e=this;this.$Modal.confirm({title:"删除确认",content:"删除此资源后，与之相关联的数据都会一并删除",onOk:function(){var e=this;this.$Loading.start();var a={auth_id:t.row.auth_id};this.func.ajaxPost(this.api.delAuthResInfo,this.qs.stringify(a),function(t){console.log((0,s.default)(t)),t.data.success?(e.$Message.info("删除成功！"),e.updateTableList()):(e.$Message.error("删除失败!请稍后再试...!"),e.loading=!1)})},onCancel:function(){e.$Message.info("点击了取消")}})},addOpen:function(t){this.addModal=!0,this.currIndex=t},addInfo:function(t){var e=this;this.$refs[t].validate(function(t){if(t){if("ROLE_"!==e.add_info.res_key.substr(0,5))return void e.$Message.error("亲..资源标识必须要以 ROLE_ 为前缀哦~");e.addAuthResInfo()}else e.$Message.error("表单验证失败!")})},addAuthResInfo:function(){var t=this,e=this.add_info;this.loading=!0,this.func.ajaxPost(this.api.addAuthResInfo,this.qs.stringify(e),function(e){e.success?(t.$Message.success("新增成功!"),t.updateTableList(),t.addModal=!1):t.$Message.error("新增失败!"),t.loading=!1})},editOpen:function(t){this.listData[t].isLeaf=1==this.listData[t].isLeaf?"1":"0",this.edit_info=this.listData[t],console.log((0,s.default)(this.edit_info)),console.log(this.edit_info.parent_id),this.editModal=!0,this.loading=!1},editInfo:function(t){var e=this;this.$refs[t].validate(function(t){if(t){if("ROLE_"!==e.edit_info.res_key.substr(0,5))return void e.$Message.error("亲..资源标识必须要以 ROLE_ 为前缀哦~");e.updateAuthResInfo()}else e.$Message.error("表单验证失败!")})},updateAuthResInfo:function(){var t=this,e=this.edit_info;this.loading=!0,this.func.ajaxPost(this.api.updateAuthResInfo,this.qs.stringify(e),function(e){e.success?(t.$Message.success("保存成功!"),t.editModal=!1,t.updateTableList()):t.$Message.error("保存成功!"),t.loading=!1})}},created:function(){this.updateTableList(this.params),this.getAuthResTypeList()}}},282:function(t,e,a){var i=a(283);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(13)("f087bbf6",i,!1,{})},283:function(t,e,a){e=t.exports=a(12)(!1),e.push([t.i,"\n.search-filter[data-v-c897523c] {\n  opacity: 0;\n  display: none;\n  overflow: hidden;\n  transition: all 0.28s ease-out;\n}\n.search-filter.active[data-v-c897523c] {\n  opacity: 1;\n  display: block;\n}\n",""])},284:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"list"},[a("Row",{staticClass:"search-filter",class:{active:t.searchState}},[a("Card",{staticStyle:{height:"125px"}},[a("Form",{attrs:{"label-width":80,inline:""}},[a("Form-item",{attrs:{label:"资源名称","label-width":70}},[a("i-input",{staticStyle:{width:"200px"},attrs:{type:"text",value:t.auth_name,placeholder:"请输入..."},on:{"update:value":function(e){t.auth_name=e},"on-enter":function(e){t.queryTableList()}}}),t._v(" "),a("input",{staticStyle:{display:"none"},attrs:{type:"text"}})],1),t._v(" "),a("Form-item",{staticStyle:{position:"fixed","z-index":"999"},attrs:{label:"资源类型","label-width":70}},[a("Select",{staticStyle:{width:"200px"},model:{value:t.type_selected,callback:function(e){t.type_selected=e},expression:"type_selected"}},[a("Option",{attrs:{value:"ALL"}},[t._v("全部")]),t._v(" "),a("Option",{attrs:{value:"MODULE"}},[t._v("模块")]),t._v(" "),a("Option",{attrs:{value:"MENU"}},[t._v("菜单")]),t._v(" "),a("Option",{attrs:{value:"OPT"}},[t._v("操作")])],1)],1),t._v(" "),a("Form-item",{staticStyle:{position:"fixed","z-index":"999","margin-left":"22%"},attrs:{label:"所属父资源","label-width":80}},[a("Select",{staticStyle:{width:"200px"},model:{value:t.parent_selected,callback:function(e){t.parent_selected=e},expression:"parent_selected"}},t._l(t.parent_res,function(e){return a("Option",{key:e.auth_id,attrs:{value:e.auth_id}},[t._v(t._s(e.name))])}))],1),t._v(" "),a("Row",{staticClass:"clearfix",staticStyle:{"border-top":"1px solid #eee","margin-top":"-15px","padding-top":"10px","text-align":"right"}},[a("span",{staticClass:"pull-right"},[a("Button",{attrs:{type:"primary",icon:"ios-search",shape:"circle"},on:{click:function(e){t.queryTableList()}}},[t._v("查询")])],1)])],1)],1)],1),t._v(" "),a("Row",[a("Col",[a("Card",[a("div",{attrs:{slot:"title"},slot:"title"},[a("Icon",{attrs:{type:"ios-film-outline"}}),t._v("\n\t\t\t\t\t固定表头\n\t\t\t\t\t"),a("Button",{attrs:{type:"dashed"},nativeOn:{click:function(e){t.fixedHeader=!t.fixedHeader}}},[a("Icon",{attrs:{type:"pin"}})],1),t._v(" "),a("Button",{attrs:{type:"success"},nativeOn:{click:function(e){t.addOpen()}}},[a("Icon",{attrs:{type:"trash-a"}}),t._v("\n            新增\n          ")],1),t._v(" "),a("Button",{attrs:{type:"primary",shape:"circle"},on:{click:t.searchShow}},[a("Icon",{attrs:{type:"funnel"}}),t._v(" 筛选")],1)],1),t._v(" "),a("a",{attrs:{slot:"extra",href:"#"},on:{click:function(e){return e.preventDefault(),t.refresh(e)}},slot:"extra"},[a("Icon",{attrs:{type:"ios-loop-strong"}})],1),t._v(" "),a("Table",{ref:"table",attrs:{loading:t.loading2,"show-header":t.showHeader,height:t.fixedHeader?350:"",data:t.listData,columns:t.columns1},on:{"on-select":t.onSelect,"on-selection-change":t.onSelectionChange}}),t._v(" "),a("Page",{staticStyle:{margin:"24px 0 24px","text-align":"right"},attrs:{total:t.totalSize,"show-total":"","show-sizer":"","show-elevator":"",current:t.current},on:{"on-change":t.changeCurrent,"on-page-size-change":t.changePageSize,"update:current":function(e){t.current=e}}})],1)],1)],1),t._v(" "),t.DateReady?a("Modal",{attrs:{title:"新增",width:"700","mask-closable":!1},model:{value:t.addModal,callback:function(e){t.addModal=e},expression:"addModal"}},[a("Form",{ref:"add_info",attrs:{model:t.add_info,"label-width":100,rules:t.formValidate}},[a("Row",[a("Col",{attrs:{span:"12"}},[a("Form-item",{attrs:{label:"资源名称",prop:"name"}},[a("Input",{attrs:{placeholder:"请输入"},model:{value:t.add_info.name,callback:function(e){t.$set(t.add_info,"name",e)},expression:"add_info.name"}})],1)],1),t._v(" "),a("Col",{attrs:{span:"12"}},[a("Form-item",{attrs:{label:"资源类型",prop:"auth_type"}},[a("Select",{model:{value:t.add_info.auth_type,callback:function(e){t.$set(t.add_info,"auth_type",e)},expression:"add_info.auth_type"}},[a("Option",{attrs:{value:"MODULE"}},[t._v("模块")]),t._v(" "),a("Option",{attrs:{value:"MENU"}},[t._v("菜单")]),t._v(" "),a("Option",{attrs:{value:"OPT"}},[t._v("操作")])],1)],1)],1)],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"12"}},[a("Form-item",{attrs:{label:"资源标识",prop:"res_key"}},[a("Input",{attrs:{placeholder:"请以 ROLE_ 为前缀..."},model:{value:t.add_info.res_key,callback:function(e){t.$set(t.add_info,"res_key",e)},expression:"add_info.res_key"}})],1)],1),t._v(" "),a("Col",{attrs:{span:"12"}},[a("Form-item",{attrs:{label:"所属父资源",prop:"parent_id"}},[a("Select",{attrs:{placeholder:"请选择"},model:{value:t.add_info.parent_id,callback:function(e){t.$set(t.add_info,"parent_id",e)},expression:"add_info.parent_id"}},t._l(t.parent_res,function(e){return a("Option",{key:e.auth_id,attrs:{value:e.auth_id}},[t._v(t._s(e.name))])}))],1)],1)],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"12"}},[a("Form-item",{attrs:{label:"资源URL",prop:"link_url"}},[a("Input",{attrs:{placeholder:"请输入页面文件相对路径..."},model:{value:t.add_info.link_url,callback:function(e){t.$set(t.add_info,"link_url",e)},expression:"add_info.link_url"}})],1)],1),t._v(" "),a("Col",{attrs:{span:"12"}},[a("Form-item",{attrs:{label:"资源图标",prop:"icon"}},[a("Input",{attrs:{placeholder:"请输入..."},model:{value:t.add_info.icon,callback:function(e){t.$set(t.add_info,"icon",e)},expression:"add_info.icon"}})],1)],1)],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"12"}},[a("Form-item",{attrs:{label:"是否子节点",prop:"isLeaf"}},[a("Select",{model:{value:t.add_info.isLeaf,callback:function(e){t.$set(t.add_info,"isLeaf",e)},expression:"add_info.isLeaf"}},[a("Option",{attrs:{value:"1"}},[t._v("是")]),t._v(" "),a("Option",{attrs:{value:"0"}},[t._v("否")])],1)],1)],1),t._v(" "),a("Col",{attrs:{span:"12"}},[a("Form-item",{attrs:{label:"资源排序",prop:"sort"}},[a("Input",{attrs:{placeholder:"请输入..."},model:{value:t.add_info.sort,callback:function(e){t.$set(t.add_info,"sort",e)},expression:"add_info.sort"}})],1)],1)],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{size:"large",type:"primary",long:"",loading:t.loading},on:{click:function(e){t.addInfo("add_info")}}},[t._v("\n          保存\n        ")])],1)],1):t._e(),t._v(" "),t.DateReady?a("Modal",{attrs:{title:"编辑",width:"700","mask-closable":!1},model:{value:t.editModal,callback:function(e){t.editModal=e},expression:"editModal"}},[a("Form",{ref:"edit_info",attrs:{model:t.edit_info,"label-width":100,rules:t.formValidate}},[a("Row",[a("Col",{attrs:{span:"12"}},[a("Form-item",{attrs:{label:"资源名称",prop:"name"}},[a("Input",{attrs:{placeholder:"请输入"},model:{value:t.edit_info.name,callback:function(e){t.$set(t.edit_info,"name",e)},expression:"edit_info.name"}})],1)],1),t._v(" "),a("Col",{attrs:{span:"12"}},[a("Form-item",{attrs:{label:"资源类型",prop:"auth_type"}},[a("Select",{model:{value:t.edit_info.auth_type,callback:function(e){t.$set(t.edit_info,"auth_type",e)},expression:"edit_info.auth_type"}},[a("Option",{attrs:{value:"MODULE"}},[t._v("模块")]),t._v(" "),a("Option",{attrs:{value:"MENU"}},[t._v("菜单")]),t._v(" "),a("Option",{attrs:{value:"OPT"}},[t._v("操作")])],1)],1)],1)],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"12"}},[a("Form-item",{attrs:{label:"资源标识",prop:"res_key"}},[a("Input",{attrs:{placeholder:"请以 ROLE_ 为前缀..."},model:{value:t.edit_info.res_key,callback:function(e){t.$set(t.edit_info,"res_key",e)},expression:"edit_info.res_key"}})],1)],1),t._v(" "),a("Col",{attrs:{span:"12"}},[a("Form-item",{attrs:{label:"所属父资源",prop:"parent_id"}},[a("Select",{attrs:{filterable:""},model:{value:t.edit_info.parent_id,callback:function(e){t.$set(t.edit_info,"parent_id",e)},expression:"edit_info.parent_id"}},t._l(t.parent_res,function(e){return a("Option",{key:e.auth_id,attrs:{value:e.auth_id}},[t._v(t._s(e.name))])}))],1)],1)],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"12"}},[a("Form-item",{attrs:{label:"资源URL",prop:"link_url"}},[a("Input",{attrs:{placeholder:"请输入页面文件相对路径..."},model:{value:t.edit_info.link_url,callback:function(e){t.$set(t.edit_info,"link_url",e)},expression:"edit_info.link_url"}})],1)],1),t._v(" "),a("Col",{attrs:{span:"12"}},[a("Form-item",{attrs:{label:"资源图标",prop:"icon"}},[a("Input",{attrs:{placeholder:"请输入..."},model:{value:t.edit_info.icon,callback:function(e){t.$set(t.edit_info,"icon",e)},expression:"edit_info.icon"}})],1)],1)],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"12"}},[a("Form-item",{attrs:{label:"是否子节点",prop:"isLeaf"}},[a("Select",{model:{value:t.edit_info.isLeaf,callback:function(e){t.$set(t.edit_info,"isLeaf",e)},expression:"edit_info.isLeaf"}},[a("Option",{attrs:{value:"1"}},[t._v("是")]),t._v(" "),a("Option",{attrs:{value:"0"}},[t._v("否")])],1)],1)],1),t._v(" "),a("Col",{attrs:{span:"12"}},[a("Form-item",{attrs:{label:"资源排序",prop:"sort"}},[a("Input",{attrs:{placeholder:"请输入..."},model:{value:t.edit_info.sort,callback:function(e){t.$set(t.edit_info,"sort",e)},expression:"edit_info.sort"}})],1)],1)],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{size:"large",type:"primary",long:"",loading:t.loading},on:{click:function(e){t.editInfo("edit_info")}}},[t._v("\n          保存\n        ")])],1)],1):t._e()],1)},n=[];i._withStripped=!0;var s={render:i,staticRenderFns:n};e.a=s}});